(function(q){var a=[{label:"Operations",count:10},{label:"Platform development",count:20,},{label:"Marketing",count:20,},{label:"Legal",count:5,},{label:"Production",count:45}];var c=360;var n=360;var k=Math.min(c,n)/2;var e=75;var f=q.scaleOrdinal(q.schemeCategory10);var g=20;var l=4;var i=q.select("#funds").append("svg").attr("width","450").attr("height","450").append("g").attr("width",c).attr("height",n).attr("transform","translate("+(450/2)+","+(450/2)+")");var b=q.arc().innerRadius(k-e).outerRadius(k);var d=q.arc().innerRadius(k-65).outerRadius(k+10);var h=q.pie().value(function(r){return r.count}).sort(null);var j=0;var p=i.selectAll("path").data(h(a)).enter().append("path").attr("d",b).attr("id",function(r){return"arc-"+(j++)}).attr("fill",function(s,r){return f(s.data.label)});j=0;var m=i.selectAll(".legend").data(f.domain()).enter().append("g").attr("legend-id",function(r){return j++}).attr("class","legend").attr("transform",function(w,t){var r=g+l;var v=r*f.domain().length/2;var u=-2*g;var s=t*r-v;return"translate("+u+","+s+")"}).style("cursor","pointer").on("click",function(){var r=q.select("#funds #arc-"+$(this).attr("legend-id"));r.style("opacity",0.3).attr("stroke","white").transition().duration(200).attr("d",d).attr("stroke-width",1);setTimeout(function(){r.style("opacity",function(s){return s.data.op}).attr("d",b).transition().duration(200).attr("stroke","none")},1000)});m.append("rect").attr("width",g).attr("height",g).style("fill",f).style("stroke",f);m.append("text").attr("x",g+l).attr("y",g-l).text(function(r){return r});var o=q.select("#funds").append("div").attr("class","tooltip");o.append("div").attr("class","label");o.append("div").attr("class","count");o.append("div").attr("class","percent");p.on("mouseover",function(t){var s=q.sum(a.map(function(u){return u.count}));var r=Math.round(1000*t.data.count/s)/10;o.select(".label").html(t.data.label);o.select(".count").html(t.data.count);o.select(".percent").html(r+"%");o.style("display","block");q.select(this).attr("stroke","white").transition().duration(200).attr("d",d).attr("opacity","0.7").attr("stroke-width",1)});p.on("mouseleave",function(r){q.select(this).transition().duration(200).attr("d",b).attr("opacity","0.9").attr("stroke","none")});p.on("mousemove",function(r){o.style("top",(q.event.layerY+10)+"px").style("left",(q.event.layerX+10)+"px")});q.select("#funds svg").append("text").attr("x",220).attr("y",20).attr("font-size","1.5em").attr("font-family","Roboto").attr("font-weight","600").attr("text-anchor","middle").text("Funding Allocation")})(window.d3);