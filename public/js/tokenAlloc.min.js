(function(r){var e=[{label:"Pre-ICO",count:15},{label:"ICO",count:50},{label:"Team",count:20,},{label:"Legal & advisory",count:2.5},{label:"Bounty",count:2.5},{label:"Reserve Pool",count:10}];var n=360;var j=360;var b=Math.min(n,j)/2;var p=75;var o=r.scaleOrdinal(r.schemeCategory10);var g=20;var f=4;var k=r.select("#chart").append("svg").attr("width","450").attr("height","450").append("g").attr("width",n).attr("height",j).attr("transform","translate("+(450/2)+","+(450/2)+")");var h=r.arc().innerRadius(b-p).outerRadius(b);var q=r.arc().innerRadius(b-65).outerRadius(b+10);var i=r.pie().value(function(s){return s.count}).sort(null);var d=0;var l=k.selectAll("path").data(i(e)).enter().append("path").attr("d",h).attr("id",function(s){return"arc-"+(d++)}).attr("fill",function(t,s){return o(t.data.label)});d=0;var a=k.selectAll(".legend").data(o.domain()).enter().append("g").attr("legend-id",function(s){return d++}).attr("class","legend").attr("transform",function(x,u){var s=g+f;var w=s*o.domain().length/2;var v=-2*g;var t=u*s-w;return"translate("+v+","+t+")"}).style("cursor","pointer").on("click",function(){var s=r.select("#chart #arc-"+$(this).attr("legend-id"));s.style("opacity",0.3).attr("stroke","white").transition().duration(200).attr("d",q).attr("stroke-width",1);setTimeout(function(){s.style("opacity",function(t){return t.data.op}).attr("d",h).transition().duration(200).attr("stroke","none")},1000)});a.append("rect").attr("width",g).attr("height",g).style("fill",o).style("stroke",o);a.append("text").attr("x",g+f).attr("y",g-f).text(function(s){return s});var c=r.select("#chart").append("div").attr("class","tooltip");c.append("div").attr("class","label");c.append("div").attr("class","count");c.append("div").attr("class","percent");l.on("mouseover",function(u){var t=r.sum(e.map(function(v){return v.count}));var s=Math.round(1000*u.data.count/t)/10;c.select(".label").html(u.data.label);c.select(".count").html(u.data.count);c.select(".percent").html(s+"%");c.style("display","block");r.select(this).attr("stroke","white").transition().duration(200).attr("d",q).attr("opacity","0.6").attr("stroke-width",1)});l.on("mouseleave",function(s){r.select(this).transition().duration(200).attr("d",h).attr("stroke","none").attr("opacity","0.9")});l.on("mouseout",function(s){c.style("display","none")});l.on("mousemove",function(s){c.style("top",(r.event.layerY+10)+"px").style("left",(r.event.layerX+10)+"px")});function m(s){s.innerRadius=0;var t=r.interpolate({startAngle:0,endAngle:0},s);return function(u){return h(t(u))}}r.select("#chart svg").append("text").attr("x",220).attr("y",20).attr("font-size","1.5em").attr("font-family","Roboto").attr("font-weight","600").attr("text-anchor","middle").text("Token Allocation")})(window.d3);