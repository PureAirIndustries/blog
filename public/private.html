<!DOCTYPE html>
<html>
  <title>Pure Air Industries - HR</title>
  <head>
    <meta name="robots" content="noindex" />
    <link
      rel="stylesheet"
      href="https://simeydotme.github.io/jQuery-ui-Slider-Pips/dist/css/jqueryui.min.css"
    />
    <link
      rel="stylesheet"
      href="https://simeydotme.github.io/jQuery-ui-Slider-Pips/dist/css/jquery-ui-slider-pips.min.css"
    />
    <link
      rel="stylesheet"
      href="https://simeydotme.github.io/jQuery-ui-Slider-Pips/dist/css/app.min.css"
    />
    <link
      rel="stylesheet"
      href="https://unpkg.com/spectre.css/dist/spectre.min.css"
    />

    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"
    ></script>

    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.7.1/css/all.css"
      integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr"
      crossorigin="anonymous"
    />

    <style>
      body {
        background: #1f1f35;
      }
      p,
      li {
        color: white;
      }

      h4 {
        color: white;
        font-family: "Helvetica Neue", sans-serif;
        font-weight: 100;
      }
      .center {
        display: flex;
        flex-direction: row;
        flex-wrap: nowrap;
        justify-content: center;
        align-items: center;
        align-content: stretch;
      }

      .left {
        flex-direction: row;
        flex-wrap: nowrap;
        justify-content: flex-start;
        align-items: center;
        align-content: stretch;
      }
      .mrgn {
        margin-top: 20px;
        padding-left: 20px;
      }
      .par {
        padding: 0 40px;
        text-align: justify;
      }
      li {
        padding-left: 60px;
        text-align: justify;
      }
      a {
        font-color: white;
        color: white;
      }
      a:hover {
        color: #00bfff;
        decoration: none;
        text-decoration: none;
      }
      header {
        background-image: url(./bg-header.min.svg), none;
      }

      .logo {
        width: 300px;
        height: auto;
        padding: 25px 0 0 25px;
      }
      .brt {
        margin-left: 45px;
      }

      .t {
        padding-right: 12px;
      }
    </style>
  </head>

  <body>
    <header></header>
    <img class="logo" src="./pureairindustries_logo_no_background.png" alt="" />
    <ul class="breadcrumb brt">
      <li class="breadcrumb-item">
        <a href="#"><i class="fas fa-cloud"></i> </a>
      </li>

      <li class="breadcrumb-item"><a href="#">PureAirIndustries</a></li>
      <li class="breadcrumb-item"><a href="#">HR</a></li>
      <li class="breadcrumb-item"><a href="#">Employability</a></li>
      <li class="breadcrumb-item"><a href="#">Houcem</a></li>
    </ul>
    <div class="container">
      <main>
        <div class="columns">
          <div class="column col-12" style="height: 40px"></div>

          <div class="column col-12">
            <h1 id="amount" style="text-align: center; color: white;"></h1>
            <div id="flat-slider"></div>
          </div>
        </div>
        <div class="columns">
          <div class="column col-4 center">
            <div class="">
              <h4>Equity</h4>
              <div id="flat-slider-vertical-1"></div>
            </div>
          </div>
          <div class="column col-4 center">
            <div class="">
              <h4>Salary</h4>
              <div id="flat-slider-vertical-2"></div>
            </div>
          </div>
          <div class="column col-4 center">
            <div class="">
              <h4>Hours</h4>
              <div id="flat-slider-vertical-3"></div>
            </div>
          </div>
        </div>
        <div class="columns">
          <div class="column col-12  left m-2 p-2">
            <h4 class="mrgn">How calculations are made</h4>
          </div>
        </div>
        <div class="columns">
          <div class="column col-1"></div>
          <div class="column col-8 p-2 par">
            <ul>
              <li>
                The max amount of equity to be given is 2.5%. This is based on a
                salary of £15,000/yr and min. 30h/week.
              </li>
              <li>
                The min amount of equity to be given is 0%. This is based on a
                salary of £30,000/yr and a min of 40h/week of work.
              </li>
              <li style="margin-top: 5px">
                For each pound .0001666667 is removed from equity.
              </li>
              <li>
                Equity do vest over time based on hours worked. To receive the
                full 2,3% you need to work at least 30h/week for 4 years.
              </li>
              <li>Top salary for now is £23,000 based on 30hr/week</li>
            </ul>
          </div>
        </div>
        <div class="columns">
          <div class="column col-12 left m-2 p-2"><h4>Notes</h4></div>
        </div>
        <div class="columns">
          <div class="column col-10">
            <p>
              We agreed on 2,5 for £15,000. And then I froze equity withdrawl
              again when we increased your salary to £19,000. As we get closer
              to £30,000 this equity needs to be taken away, so if salary is
              £19,001/yr equity will be 1.9% based on a 30 hr/week.
            </p>
            <p>
              I'm flexible on working hours but can't allow less than 20h/week.
              Salary will still be calculated based on amount of h. worked.
            </p>
            <p>
              Bear in mind, the total yr salary can be revised as we get money
              coming in without affecting equity. Also, if there is any monetary
              price we can receive because of you (e.g. the royal academy of
              engineers awards money prizes to companies with engineers) we can
              have another discussion around this.
            </p>
          </div>
          <div class="column col-4 col-ml-auto"></div>
          <form action="" id="dataF">
            <input type="hidden" id="equityIn" name="equityIn" />
            <input type="hidden" id="salaryIn" name="salaryIn" />
            <input type="hidden" id="hoursIn" name="hoursIn" />
          </form>
        </div>
      </main>
    </div>
  </body>
  <script
    type="text/javascript"
    src="https://simeydotme.github.io/jQuery-ui-Slider-Pips/dist/js/jquery-plus-ui.min.js"
  ></script>
  <script
    type="text/javascript"
    src="https://simeydotme.github.io/jQuery-ui-Slider-Pips/dist/js/jquery-ui-slider-pips.js"
  ></script>
  <script type="text/javascript">
    $.extend($.ui.slider.prototype.options, {
      animate: 300
    });
    var equity = 25;
    var salary = 19000;
    var hours = 30;

    $("#flat-slider")
      .slider({
        max: 50,
        min: 0,
        range: true,
        values: [10, 40]
      })
      .slider("pips", {
        first: "pip",
        last: "pip"
      });

    $("#flat-slider-vertical-1").slider({
      max: 25,
      min: 0,
      range: "min",
      value: equity,
      orientation: "vertical",
      slide: function(event, ui) {
        $("#equityIn")
          .val(ui.value)
          .change();
      }
    });

    $("#flat-slider-vertical-2").slider({
      max: 30000,
      min: 15000,
      range: "min",
      value: salary,
      orientation: "vertical",
      slide: function(event, ui) {
        $("#salaryIn")
          .val(ui.value)
          .change();
      }
    });

    $("#flat-slider-vertical-3").slider({
      max: 30,
      min: 20,
      range: "min",
      value: hours,
      orientation: "vertical",
      slide: function(event, ui) {
        $("#hoursIn")
          .val(ui.value)
          .change();
      }
    });

    $(
      "#flat-slider-vertical-1, #flat-slider-vertical-2, #flat-slider-vertical-3"
    )
      .slider("pips", {
        first: "pip",
        last: "pip"
      })
      .slider("float");

    $("#flat-slider-vertical-1").on("slidestop", function(event, ui) {
      var sal = $("#flat-slider-vertical-2").slider("value");

      if (ui.value == 0) {
        $("#flat-slider-vertical-2").slider("value", 30000);
        $("#flat-slider-vertical-3").slider("value", 30);
      }
      if (sal <= 19000) {
        $("#flat-slider-vertical-1").slider("value", 25);
      } else if (sal == 19001) {
        $("#flat-slider-vertical-1").slider("value", 19);
      } else if (sal <= 30000 && sal >= 19002) {
        var rem = (sal - 15000) * 0.001666667;
        var t = equity - rem;
        $("#flat-slider-vertical-1").slider("value", t);
      }

      updateUI(ui.value, salary, hours);
    });

    $("#flat-slider-vertical-2").on("slidestop", function(event, ui) {
      var equty = $("#flat-slider-vertical-1").slider("value");
      var sal = ui.value;

      if (sal > 19001) {
        var rem = (sal - 15000) * 0.001666667;
        var t;
        if (sal > 23000) {
          rem = (23000 - 15000) * 0.001666667;
          t = equity - rem;
          $("#flat-slider-vertical-1").slider("value");
          $("#flat-slider-vertical-2").slider("value", 23000);
        }
        t = equity - rem;
        $("#flat-slider-vertical-1")
          .slider("value", t)
          .change();
      } else if (sal < 19000) {
        $("#flat-slider-vertical-1")
          .slider("value", 25)
          .change();
      }

      updateUI(t, ui.value, hours);
    });

    $("#flat-slider-vertical-3").on("slidestop", function(event, ui) {
      var salary = 23000;
      var hours = 30;
      var weeksInYear = 52.142;
      var hourlySalary = salary / weeksInYear / hours;
      if (
        $("#flat-slider-vertical-3").slider("value") >= 21 &&
        $("#flat-slider-vertical-2").slider("value") > 19000
      ) {
        var sal = $("#flat-slider-vertical-2").slider("value");
        var rem = (sal - 15000) * 0.001666667;
        var t = equity - rem;
        $("#flat-slider-vertical-1").slider("value", t);
      } else if ($("#flat-slider-vertical-2").slider("value") <= 19000) {
        $("#flat-slider-vertical-1").slider("value", 25);
      }

      if ($("#flat-slider-vertical-1").slider("value") == 0) {
        mult = 500;
      }
      var currentsal = ui.value * hourlySalary * weeksInYear;
      $("#flat-slider-vertical-2").slider("value", currentsal);

      updateUI(equity, salary, ui.value);
    });

    var url =
      "https://script.google.com/macros/s/AKfycbz2yk_lbcdAdiylYoDYDT0hDAGkoEBWaMBMg17fwgQAtPORxJ-q/exec";

    $("input").on("change", function(ev) {
      console.log($("#dataF").serialize());
      ev.preventDefault();
      var jqxhr = $.ajax({
        url: url,
        method: "GET",
        dataType: "json",
        data: JSON.stringify($("#dataF").serialize())
      }).success(console.log("yay"));
    });

    function updateUI(newEquity, newSalary, newHours) {
      var eq = (newEquity / 10).toFixed(1);
      if (eq <= 0) {
        eq = 0;
      }
      $("#amount").html(
        "<span class='t' id='equity'>E: " +
          eq +
          "%" +
          "</span>   <span class='t' id='amount'>   £: " +
          newSalary +
          "/yr</span>   <span class='t' id='hours'>    T: " +
          newHours +
          "hrs/week</span>"
      );
    }

    $(document).ready(function() {
      $("#equityIn").val(equity);
      $("#salaryIn").val(salary);
      $("#hoursIn").val(hours);
      updateUI(equity, salary, hours);

      $("flat-slider-vertical-2.ui-slider-tip").css("padding-right", "6px");
      $("flat-slider-vertical-2.ui-slider-tip").css("left", "0%");
      $("flat-slider-vertical-2.ui-slider-tip").css("margin-left", "10px");
      $("flat-slider-vertical-2.ui-slider-tip").css("width", "38px");
    });
  </script>
</html>
